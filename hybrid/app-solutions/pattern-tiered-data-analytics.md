---
title: Azure と Azure Stack Hub を使用した分析パターンのための階層化データ
description: Azure と Azure Stack Hub を使用して、ハイブリッド クラウド全体に階層化データ ソリューションを実装する方法について説明します。
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: b671fa9f47fa51ab6e40633c04964957d613fec2
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/17/2020
ms.locfileid: "84911245"
---
# <a name="tiered-data-for-analytics-pattern"></a><span data-ttu-id="3737c-103">分析パターンの階層化データ</span><span class="sxs-lookup"><span data-stu-id="3737c-103">Tiered data for analytics pattern</span></span>

<span data-ttu-id="3737c-104">このパターンでは、Azure Stack Hub と Azure を使用して、データをステージ、分析、処理、およびサニタイズし、複数のオンプレミスとクラウドの場所に格納する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3737c-104">This pattern illustrates how to use Azure Stack Hub and Azure to stage, analyze, process, sanitize, and store data across multiple on-premises and cloud locations.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="3737c-105">コンテキストと問題</span><span class="sxs-lookup"><span data-stu-id="3737c-105">Context and problem</span></span>

<span data-ttu-id="3737c-106">最新のテクノロジ環境でエンタープライズ組織が直面している問題の 1 つは、データの保存、処理、分析をセキュリティで保護することです。</span><span class="sxs-lookup"><span data-stu-id="3737c-106">One of the problems facing enterprise organizations in the modern technology landscape concerns secure data storage, processing, and analyzing.</span></span> <span data-ttu-id="3737c-107">考慮事項は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="3737c-107">Considerations include:</span></span>

- <span data-ttu-id="3737c-108">データ コンテンツ</span><span class="sxs-lookup"><span data-stu-id="3737c-108">data content</span></span>
- <span data-ttu-id="3737c-109">location</span><span class="sxs-lookup"><span data-stu-id="3737c-109">location</span></span>
- <span data-ttu-id="3737c-110">セキュリティとプライバシーの要件</span><span class="sxs-lookup"><span data-stu-id="3737c-110">security and privacy requirements</span></span>
- <span data-ttu-id="3737c-111">アクセス許可</span><span class="sxs-lookup"><span data-stu-id="3737c-111">access permissions</span></span>
- <span data-ttu-id="3737c-112">メンテナンス</span><span class="sxs-lookup"><span data-stu-id="3737c-112">maintenance</span></span>
- <span data-ttu-id="3737c-113">ストレージ ウェアハウス</span><span class="sxs-lookup"><span data-stu-id="3737c-113">storage warehousing</span></span>

<span data-ttu-id="3737c-114">Azure では、Azure Stack Hub と組み合わせることで、データに関する問題に対処し、低コストのソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="3737c-114">Azure, in combination with Azure Stack Hub, addresses data concerns and offers low-cost solutions.</span></span> <span data-ttu-id="3737c-115">このソリューションは、分散製造または物流企業を通じて最適に表現されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-115">This solution is best expressed through a distributed manufacturing or logistics company.</span></span>

<span data-ttu-id="3737c-116">ソリューションは、次のシナリオに基づいています。</span><span class="sxs-lookup"><span data-stu-id="3737c-116">The solution is based on the following scenario:</span></span>

- <span data-ttu-id="3737c-117">大規模な複数部門がある製造組織。</span><span class="sxs-lookup"><span data-stu-id="3737c-117">A large multi-branch manufacturing organization.</span></span>
- <span data-ttu-id="3737c-118">グローバルな遠隔地と中央の本社の間で、高速かつ安全なデータの保存、処理、および分散が必要。</span><span class="sxs-lookup"><span data-stu-id="3737c-118">Rapid and secure data storage, processing, and distribution between global remote locations and its central headquarters are required.</span></span>
- <span data-ttu-id="3737c-119">従業員とマシン アクティビティ、施設情報、およびビジネス レポート データを安全に保つ必要がある。</span><span class="sxs-lookup"><span data-stu-id="3737c-119">Employee and machinery activity, facility information, and business reporting data that must remain secure.</span></span> <span data-ttu-id="3737c-120">データは適切に分散され、地域のコンプライアンス ポリシーと業界の規制に準拠する必要がある。</span><span class="sxs-lookup"><span data-stu-id="3737c-120">The data must be distributed appropriately and meet regional compliance policy and industry regulations.</span></span>

## <a name="solution"></a><span data-ttu-id="3737c-121">解決策</span><span class="sxs-lookup"><span data-stu-id="3737c-121">Solution</span></span>

<span data-ttu-id="3737c-122">オンプレミスとパブリック クラウド両方の環境を使用して、複数の施設がある企業の需要に応えます。</span><span class="sxs-lookup"><span data-stu-id="3737c-122">Using both on-premises and public cloud environments meets the demands of multi-facility enterprises.</span></span> <span data-ttu-id="3737c-123">Azure Stack Hub では、ローカルおよびリモート データを収集、処理、格納、分散するための高速で安全で柔軟なソリューションが提供されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-123">Azure Stack Hub offers a rapid, secure, and flexible solution for collecting, processing, storing, and distributing local and remote data.</span></span> <span data-ttu-id="3737c-124">このパターンは、場所やユーザーによってセキュリティ、機密性、会社のポリシー、規制の要件が異なる場合に特に役に立ちます。</span><span class="sxs-lookup"><span data-stu-id="3737c-124">This pattern is especially useful when security, confidentiality, corporate policy, and regulatory requirements may differ between locations and users.</span></span>

![分析ソリューション アーキテクチャ用の階層化データ パターン](media/pattern-tiered-data-analytics/solution-architecture.png)

## <a name="components"></a><span data-ttu-id="3737c-126">Components</span><span class="sxs-lookup"><span data-stu-id="3737c-126">Components</span></span>

<span data-ttu-id="3737c-127">このパターンでは、次のコンポーネントを使用します。</span><span class="sxs-lookup"><span data-stu-id="3737c-127">This pattern uses the following components:</span></span>

| <span data-ttu-id="3737c-128">レイヤー</span><span class="sxs-lookup"><span data-stu-id="3737c-128">Layer</span></span> | <span data-ttu-id="3737c-129">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="3737c-129">Component</span></span> | <span data-ttu-id="3737c-130">説明</span><span class="sxs-lookup"><span data-stu-id="3737c-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="3737c-131">Azure</span><span class="sxs-lookup"><span data-stu-id="3737c-131">Azure</span></span> | <span data-ttu-id="3737c-132">ストレージ</span><span class="sxs-lookup"><span data-stu-id="3737c-132">Storage</span></span> | <span data-ttu-id="3737c-133">[Azure Storage](/azure/storage/) アカウントにより、データ消費のエンドポイントが提供されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-133">An [Azure Storage](/azure/storage/) account provides a sterile data consumption endpoint.</span></span> <span data-ttu-id="3737c-134">Azure Storage は、最新のデータ ストレージ シナリオ用の Microsoft のクラウド ストレージ ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="3737c-134">Azure Storage is Microsoft's cloud storage solution for modern data storage scenarios.</span></span> <span data-ttu-id="3737c-135">Azure Storage では、データ オブジェクトのための高度にスケーラブルなオブジェクト ストアと、クラウドのためのファイル システム サービスが提供されています。</span><span class="sxs-lookup"><span data-stu-id="3737c-135">Azure Storage offers a massively scalable object store for data objects and a file system service for the cloud.</span></span> <span data-ttu-id="3737c-136">また、信頼できるメッセージ処理のためのメッセージング ストアと、NoSQL ストアも提供されています。</span><span class="sxs-lookup"><span data-stu-id="3737c-136">It also provides a messaging store for reliable messaging and a NoSQL store.</span></span> |
| <span data-ttu-id="3737c-137">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="3737c-137">Azure Stack Hub</span></span> | <span data-ttu-id="3737c-138">ストレージ</span><span class="sxs-lookup"><span data-stu-id="3737c-138">Storage</span></span> | <span data-ttu-id="3737c-139">[Azure Stack Hub ストレージ](/azure-stack/user/azure-stack-storage-overview) アカウントは、複数のサービスに使用されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-139">An [Azure Stack Hub Storage](/azure-stack/user/azure-stack-storage-overview) account is used for multiple services:</span></span><br><br><span data-ttu-id="3737c-140">-  生データ ストレージ用の **BLOB ストレージ**。</span><span class="sxs-lookup"><span data-stu-id="3737c-140">- **Blob storage** for raw data storage.</span></span> <span data-ttu-id="3737c-141">BLOB ストレージには、ドキュメント、メディア ファイル、アプリ インストーラーなど、任意の種類のテキストやバイナリ データを格納できます。</span><span class="sxs-lookup"><span data-stu-id="3737c-141">Blob storage can hold any type of text or binary data, such as a document, media file, or app installer.</span></span> <span data-ttu-id="3737c-142">すべての BLOB はコンテナーに編成されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-142">Every blob is organized under a container.</span></span> <span data-ttu-id="3737c-143">コンテナーを使用すると、オブジェクトのグループにセキュリティ ポリシーの割り当てに役立つ手段が提供されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-143">Containers provide a useful way to assign security policies to groups of objects.</span></span> <span data-ttu-id="3737c-144">ストレージ アカウントの容量の上限である 500 TB (テラバイト) を超えない限り、ストレージ アカウントには任意の数のコンテナーを含めることができ、コンテナーには任意の数の BLOB を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="3737c-144">A storage account may contain any number of containers, and a container can contain any number of blobs, up to the 500-TB capacity limit of the storage account.</span></span><br><span data-ttu-id="3737c-145">-  データ アーカイブ用の **BLOB ストレージ**。</span><span class="sxs-lookup"><span data-stu-id="3737c-145">- **Blob storage** for data archive.</span></span> <span data-ttu-id="3737c-146">クール データ アーカイブ用の低コストのストレージにはベネフィットがあります。</span><span class="sxs-lookup"><span data-stu-id="3737c-146">There are benefits to low-cost storage for cool data archiving.</span></span> <span data-ttu-id="3737c-147">クール データの例には、バックアップ、メディア コンテンツ、科学データ、コンプライアンス、アーカイブ データなどがあります。</span><span class="sxs-lookup"><span data-stu-id="3737c-147">Examples of cool data include backups, media content, scientific data, compliance, and archival data.</span></span> <span data-ttu-id="3737c-148">一般に、頻繁にアクセスされないデータは、クール ストレージと見なされます。</span><span class="sxs-lookup"><span data-stu-id="3737c-148">In general, any data that's accessed infrequently is considered cool storage.</span></span> <span data-ttu-id="3737c-149">アクセスの頻度や保有期間などの属性に基づいてデータが階層化されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-149">Tiering data based on attributes like frequency of access and retention period.</span></span> <span data-ttu-id="3737c-150">顧客データは、アクセス頻度は低くくても、ホット データと同様の待ち時間とパフォーマンスが要求されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-150">Customer data is infrequently accessed but requires similar latency and performance to hot data.</span></span><br><span data-ttu-id="3737c-151">-  処理されたデータ ストレージ用の **Queue storage**。</span><span class="sxs-lookup"><span data-stu-id="3737c-151">- **Queue storage** for processed data storage.</span></span> <span data-ttu-id="3737c-152">Queue storage では、アプリ コンポーネント間のクラウド メッセージングが提供されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-152">Queue storage provides cloud messaging between app components.</span></span> <span data-ttu-id="3737c-153">拡張性を重視してアプリを設計する場合、通常、アプリ コンポーネントを個別に拡張できるように分離します。</span><span class="sxs-lookup"><span data-stu-id="3737c-153">In designing apps for scale, app components are often decoupled so they can scale independently.</span></span> <span data-ttu-id="3737c-154">Queue storage は、アプリ コンポーネントがクラウド、デスクトップ、オンプレミスのサーバー、モバイル デバイスのいずれで実行されている場合でも、それらの間の通信に非同期メッセージングを提供します。</span><span class="sxs-lookup"><span data-stu-id="3737c-154">Queue storage delivers asynchronous messaging for communication between app components, whether they're running in the cloud, on the desktop, an on-premises server, or a mobile device.</span></span> <span data-ttu-id="3737c-155">Queue Storage ではまた、非同期タスクの管理とプロセス ワークフローの構築もサポートします。</span><span class="sxs-lookup"><span data-stu-id="3737c-155">Queue storage also supports managing asynchronous tasks and building process work flows.</span></span> |
| | <span data-ttu-id="3737c-156">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="3737c-156">Azure Functions</span></span> | <span data-ttu-id="3737c-157">[Azure Functions](/azure/azure-functions/) サービスは、[Azure App Service on Azure Stack Hub](/azure-stack/operator/azure-stack-app-service-overview) リソース プロバイダーによって提供されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-157">The [Azure Functions](/azure/azure-functions/) service is provided by the [Azure App Service on Azure Stack Hub](/azure-stack/operator/azure-stack-app-service-overview) resource provider.</span></span> <span data-ttu-id="3737c-158">Azure Functions を使用すると、さまざまなイベントに応答して、単純なサーバーレス環境でコードを実行できます。</span><span class="sxs-lookup"><span data-stu-id="3737c-158">Azure Functions lets you execute your code in a simple, serverless environment in response to a variety of events.</span></span> <span data-ttu-id="3737c-159">Azure Functions では、VM を作成したり、Web アプリを発行したりしなくても、任意のプログラミング言語を使用して、需要に合わせてスケールできます。</span><span class="sxs-lookup"><span data-stu-id="3737c-159">Azure Functions scale to meet demand without having to create a VM or publish a web app, using the programming language of your choice.</span></span> <span data-ttu-id="3737c-160">関数は、次の場合にソリューションによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-160">Functions are used by the solution for:</span></span><br><br><span data-ttu-id="3737c-161">- **データの取り込み**</span><span class="sxs-lookup"><span data-stu-id="3737c-161">- **Data intake**</span></span><br><span data-ttu-id="3737c-162">- **データの最適化。**</span><span class="sxs-lookup"><span data-stu-id="3737c-162">- **Data sterilization.**</span></span> <span data-ttu-id="3737c-163">手動でトリガーされた関数では、スケジュールされたデータ処理、クリーンアップ、およびアーカイブを実行できます。</span><span class="sxs-lookup"><span data-stu-id="3737c-163">Manually triggered functions can perform scheduled data processing, clean up, and archiving.</span></span> <span data-ttu-id="3737c-164">例として、夜間の顧客リストのスクラブや月次レポート処理などがあります。</span><span class="sxs-lookup"><span data-stu-id="3737c-164">Examples may include nightly customer list scrubs and monthly report processing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="3737c-165">問題と注意事項</span><span class="sxs-lookup"><span data-stu-id="3737c-165">Issues and considerations</span></span>

<span data-ttu-id="3737c-166">このソリューションの実装方法を決めるときには、以下の点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="3737c-166">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="3737c-167">スケーラビリティ</span><span class="sxs-lookup"><span data-stu-id="3737c-167">Scalability</span></span>

<span data-ttu-id="3737c-168">Azure Functions とストレージ ソリューションは、データ ボリュームおよび処理の需要に応じてスケーリングします。</span><span class="sxs-lookup"><span data-stu-id="3737c-168">Azure Functions and storage solutions scale to meet data volume and processing demands.</span></span> <span data-ttu-id="3737c-169">Azure のスケーラビリティ情報とターゲットについては、[Azure Storage のスケーラビリティに関するドキュメント](/azure/storage/common/storage-scalability-targets)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3737c-169">For Azure scalability information and targets, see [Azure Storage scalability documentation](/azure/storage/common/storage-scalability-targets).</span></span>

### <a name="availability"></a><span data-ttu-id="3737c-170">可用性</span><span class="sxs-lookup"><span data-stu-id="3737c-170">Availability</span></span>

<span data-ttu-id="3737c-171">ストレージは、このパターンの可用性に関する主要な考慮事項です。</span><span class="sxs-lookup"><span data-stu-id="3737c-171">Storage is the primary availability consideration for this pattern.</span></span> <span data-ttu-id="3737c-172">大規模データ ボリュームの処理および分散には、高速リンク経由の接続が必要です。</span><span class="sxs-lookup"><span data-stu-id="3737c-172">Connection via fast links is required for large data volume processing and distribution.</span></span>

### <a name="manageability"></a><span data-ttu-id="3737c-173">管理の容易性</span><span class="sxs-lookup"><span data-stu-id="3737c-173">Manageability</span></span>

<span data-ttu-id="3737c-174">このソリューションの管理容易性は、使用している作成ツールとソース管理のエンゲージメントによって異なります。</span><span class="sxs-lookup"><span data-stu-id="3737c-174">Manageability of this solution depends on authoring tools in use and engagement of source control.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3737c-175">次のステップ</span><span class="sxs-lookup"><span data-stu-id="3737c-175">Next steps</span></span>

<span data-ttu-id="3737c-176">この記事で紹介したトピックの関連情報:</span><span class="sxs-lookup"><span data-stu-id="3737c-176">To learn more about topics introduced in this article:</span></span>

- <span data-ttu-id="3737c-177">[Azure Storage](/azure/storage/) と [Azure Functions](/azure/azure-functions/) のドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3737c-177">See the [Azure Storage](/azure/storage/) and [Azure Functions](/azure/azure-functions/) documentation.</span></span> <span data-ttu-id="3737c-178">このパターンでは、Azure と Azure Stack Hub の両方で、Azure Storage アカウントと Azure Functions が頻繁に使用されます。</span><span class="sxs-lookup"><span data-stu-id="3737c-178">This pattern makes heavy use of Azure Storage accounts and Azure Functions on both Azure and Azure Stack Hub.</span></span>
- <span data-ttu-id="3737c-179">ベスト プラクティスの詳細を確認し、その他の疑問への回答を得るには、[ハイブリッド アプリケーションの設計上の考慮事項](overview-app-design-considerations.md)に関する記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3737c-179">See [Hybrid application design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to additional questions.</span></span>
- <span data-ttu-id="3737c-180">製品とソリューションのポートフォリオ全体の詳細について、[Azure Stack ファミリの製品とソリューション](/azure-stack)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3737c-180">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="3737c-181">ソリューションの例をテストする準備ができたら、[分析ソリューションの階層化データのデプロイ ガイド](https://aka.ms/tiereddatadeploy)に進んでください。</span><span class="sxs-lookup"><span data-stu-id="3737c-181">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/tiereddatadeploy).</span></span> <span data-ttu-id="3737c-182">デプロイ ガイドでは、コンポーネントをデプロイしてテストするための詳細な手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="3737c-182">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
